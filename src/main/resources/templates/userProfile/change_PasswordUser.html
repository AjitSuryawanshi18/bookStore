<!doctype html>
<html lang="en" xmlns:th="https://www.thymeleaf.com" th:replace="~{base_Login::layout(~{::section})}">

<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- Bootstrap CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	<link rel="stylesheet" th:href="@{/css/stylee.css}" />

	<title>Change Password</title>
</head>

<body>




	<section>



		<div class="container p-3">
			<div class="row">
				<div class="col-md-6 offset-md-3">
					<div class="card">
						<div class="card-header text-center fs-4">
							
							<h2>CHANGE PASSWORD</h2>
						</div>
						<th:block th:if="${param.error}">
							<p class="text-center text-danger fs-5">
								[[${session.SPRING_SECURITY_LAST_EXCEPTION.message}]]</p>
						</th:block>
						<!--message after password changed successfully -->

						<th:block th:if="${session.msg}">
							<p class="text-center text-success fs-4">[[${session.msg}]]</p>
							<th:block th:text="${@userServiceImpl.removeSessionMessage()}"></th:block>
							<!-- this is for remove attribute after refresh in spring boot 3-->
							<span><a th:href="@{/admin/profile}" style="text-decoration: none;"
									class="btn btn-outline-info">Back</a></span>
						</th:block>

						<!--message after wrong or missMatch password entered -->
						<th:block th:if="${session.msg_red}">
							<p class="text-center text-danger fs-4">[[${session.msg_red}]]</p>

							<!--link for forgot password-->
							<span><a th:href="@{/password-request}" style="text-decoration: none;"
									class="btn btn-outline-warning d-flex float-end">Forgot Password</a></span>

							<th:block th:text="${@userServiceImpl.removeSessionMessage()}"></th:block>
							<!-- this is for remove attribute after refresh in spring boot 3-->
						</th:block>

						<div class="card-body">

							<form action="change_PasswordUser-Post" method="post">
								<div class="mb-3">
									<label for="oldPassword" class="form-label">Old Password</label>
									<input type="password" class="form-control" id="oldPassword" name="oldPassword"
										required><input type="checkbox" onclick="myFunction()">Show Password
								</div>
								<div class="mb-3">
									<label for="newPassword" class="form-label">New Password</label>
									<input type="password" class="form-control" id="newPassword" name="newPassword"
										required>
								</div>
								<div class="mb-3">
									<label for="confirmPassword" class="form-label">Confirm Password</label>
									<input type="password" class="form-control" id="confirmPassword"
										name="confirmPassword" required><input type="checkbox"
										onclick="myFunction1()">Show
									Password
								</div>

								<button class="btn btn-primary col-md-12">Change Password</button>

							</form>
								
							<span><a th:href="@{/user/user_profile}" style="text-decoration: none;"
									class="btn btn-outline-info mt-3">&laquo; Back</a></span>
						

						</div>
					</div>
				</div>
			</div>

		</div>





		<!--script for show password -->

		<script>
			function myFunction() {

				var x = document.getElementById("oldPassword");
				if (x.type === "password") {
					x.type = "text";
				} else {
					x.type = "password";
				}
			}

			function myFunction1() {

				var x = document.getElementById("confirmPassword");
				if (x.type === "password") {
					x.type = "text";
				} else {
					x.type = "password";
				}
			}






		</script>




	</section>


	<!-- footer start-->
	<footer class="footer1">
		<p>Â© 2023 BookStore.com All Rights Reserved</p>
	</footer>
	<!-- footer end-->

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
		crossorigin="anonymous"></script>


</body>

</html>